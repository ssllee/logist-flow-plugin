!function(t){t.fn.flowplugin=function(e){e=t.extend({jsonDate:[],imgSrcStart:"img/f1.png",imgSrcOther:"img/f2.png",imgWidth:"20px",imgHeight:"20px",imgClass:void 0},e);var l='<div class="flowSwrap"><div class="flow-line"></div></div>',i='<div id="CELL_ID" class="flowCell"><div class="cell-left"></div><div class="cell-center"></div><div class="cell-right"></div></div>';function s(s){if(null!=e.jsonDate&&null!=e.jsonDate.data&&0!=e.jsonDate.data.length){var a=e.jsonDate.data,c=a.length;s.append(l),t.each(a,function(l,s){var a=s.createDate.split(/\s/)[0],n=s.createDate.split(/\s/)[1],r=s.jobName,g=void 0==s.jobOther?"":s.jobOther.split(/,/),d="cell_"+l,o=i.replace("CELL_ID",d);t(".flowSwrap").append(o);var p='<p class="t1">'+n+'</p><p class="t2">'+a+"</p>",m=t("#"+d+" .cell-left");m.append(p),0==l?e.imgClass?cellCenterHtml='<img id="startImg" src="'+e.imgSrcStart+'" class="'+e.imgClass+'" />':cellCenterHtml='<img id="startImg" src="'+e.imgSrcStart+'" width="'+e.imgWidth+'" height="'+e.imgHeight+'" />':cellCenterHtml=l+1==c?'<img id="endImg" src="'+e.imgSrcOther+'" class="'+e.imgClass+'" />':'<img src="'+e.imgSrcOther+'" class="'+e.imgClass+'" />',t("#"+d+" .cell-center").append(cellCenterHtml);var f=0==l?'<p class="t1_start">'+r+"</p>":'<p class="t1">'+r+"</p>",h=t("#"+d+" .cell-right");h.append(f),t.each(g,function(t,e){var l='<p class="t2">'+e+"</p>";h.append(l)}),0==l?m.addClass("fc-orange"):m.addClass("fc-grey"),0==l?h.addClass("fc-orange"):h.addClass("fc-grey")}),c>1&&function(){var e=t("#startImg").position().left,l=t("#startImg").position().top,i=t("#startImg").width(),s=t("#startImg").height(),a=t("#endImg").position().left,c=t("#endImg").position().top,n=t(".flow-line").width();console.log(e,l,a,c,i);var r=e+i/2-n/2,g=l+s/2,d=c-l-s/2;t(".flow-line").css({left:r,top:g,height:d})}()}}return t.each(this,function(){s(t(this))})}}(jQuery);